<!DOCTYPE html>
<html>
  <head>
    <title>Credential HSML Object Creator</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <script>
      // Toggle display of optional fields when checkbox is changed.
      function toggleOptional() {
        var checkBox = document.getElementById("optional_checkbox");
        var optionalFields = document.getElementById("optional_fields");
        if (checkBox.checked) {
          optionalFields.style.display = "block";
        } else {
          optionalFields.style.display = "none";
        }
      }
      document.addEventListener("DOMContentLoaded", function () {
        document
          .getElementById("optional_checkbox")
          .addEventListener("change", toggleOptional);
        toggleOptional();
      });
    </script>
  </head>
  <body>
    <div class="container">
      <h1>Create Credential HSML Object</h1>
      <form method="POST" enctype="multipart/form-data">
        <!-- Required Fields -->
        <label for="credential_name">Credential Name:</label>
        <input
          type="text"
          id="credential_name"
          name="credential_name"
          required
        />
        <br /><br />

        <label for="credential_description">Credential Description:</label>
        <textarea
          id="credential_description"
          name="credential_description"
          required
        ></textarea>
        <br /><br />

        <!-- DID Key Upload (for the user receiving the credential) -->
        <label for="did_pem_file"
          >Upload the DID Private Key (.pem) for the user receiving the
          credential:</label
        >
        <input
          type="file"
          id="did_pem_file"
          name="did_pem_file"
          accept=".pem"
          required
        />
        <br /><br />

        <!-- Issued By Section -->
        <fieldset>
          <legend>Issued By</legend>
          <label for="issuedBy_type">Type:</label>
          <input
            type="text"
            id="issuedBy_type"
            name="issuedBy_type"
            placeholder="e.g., Person"
            required
          />
          <br /><br />
          <label for="issuedBy_name">Name:</label>
          <input type="text" id="issuedBy_name" name="issuedBy_name" required />
          <br /><br />
          <label for="issuedBy_swid">SWID:</label>
          <input type="text" id="issuedBy_swid" name="issuedBy_swid" required />
        </fieldset>
        <br />

        <!-- Access Authorization Section -->
        <fieldset>
          <legend>Access Authorization</legend>
          <label for="accessAuthorization_type">Type:</label>
          <input
            type="text"
            id="accessAuthorization_type"
            name="accessAuthorization_type"
            placeholder="e.g., Agent"
            required
          />
          <br /><br />
          <label for="accessAuthorization_name">Name:</label>
          <input
            type="text"
            id="accessAuthorization_name"
            name="accessAuthorization_name"
            required
          />
          <br /><br />
          <label for="accessAuthorization_swid">SWID:</label>
          <input
            type="text"
            id="accessAuthorization_swid"
            name="accessAuthorization_swid"
            required
          />
        </fieldset>
        <br />

        <!-- Authorized For Domain Section -->
        <fieldset>
          <legend>Authorized For Domain</legend>
          <label for="authorizedForDomain_type">Type:</label>
          <input
            type="text"
            id="authorizedForDomain_type"
            name="authorizedForDomain_type"
            placeholder="e.g., Agent"
            required
          />
          <br /><br />
          <label for="authorizedForDomain_name">Name:</label>
          <input
            type="text"
            id="authorizedForDomain_name"
            name="authorizedForDomain_name"
            required
          />
          <br /><br />
          <label for="authorizedForDomain_swid">SWID:</label>
          <input
            type="text"
            id="authorizedForDomain_swid"
            name="authorizedForDomain_swid"
            required
          />
        </fieldset>
        <br />

        <!-- Optional Fields Toggle -->
        <input
          type="checkbox"
          id="optional_checkbox"
          name="optional_checkbox"
        />
        <label for="optional_checkbox">Enable Optional Fields</label>
        <br /><br />

        <div id="optional_fields" style="display: none">
          <label for="content_url">Content URL:</label>
          <input type="url" id="content_url" name="content_url" />
          <br /><br />

          <fieldset>
            <legend>Platform</legend>

            <label for="validFor">Valid For:</label>
            <input
              type="text"
              id="validFor"
              name="validFor"
              placeholder="e.g., 1 year"
            />
            <br /><br />

            <label for="validFrom">Valid From:</label>
            <input type="date" id="validFrom" name="validFrom" />
            <br /><br />

            <label for="validUntil">Valid Until:</label>
            <input type="date" id="validUntil" name="validUntil" />
            <br /><br />
          </fieldset>
        </div>

        <input type="submit" value="Generate HSML JSON" />
      </form>
    </div>
  </body>
</html>
