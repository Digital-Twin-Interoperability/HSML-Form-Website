<!DOCTYPE html>
<html>
  <head>
    <title>HSML JSON Result</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>
  <body>
    <div class="container">
      <h1>Generated HSML JSON</h1>
      <pre id="jsonDisplay">{{ json_str | tojson }}</pre>

      <button id="downloadJsonButton">Download JSON</button>
      <script>
        document
          .getElementById("downloadJsonButton")
          .addEventListener("click", function () {
            const jsonData = document.getElementById("jsonDisplay").textContent;
            const blob = new Blob([jsonData], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "hsml.json";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
          });
      </script>

      {% if private_key %}
      <pre id="privateKeyDisplay" style="display: none">
{{ private_key | tojson }}</pre
      >
      <button id="downloadKeyButton">Download mykey.pem</button>
      <script>
        document
          .getElementById("downloadKeyButton")
          .addEventListener("click", function () {
            const privateKey =
              document.getElementById("privateKeyDisplay").textContent;
            const blob = new Blob([privateKey], {
              type: "application/octet-stream",
            });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "mykey.pem";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
          });
      </script>
      {% endif %}

      <br /><br />
      <a href="{{ url_for('landing') }}">Back to Home</a>
    </div>
  </body>
</html>
